# 連絡事項

- 見た目の装飾は不要です（CSSなど）
- Unit Test は不要です
- Spring Boot を使ってください
- Thymeleaf を使ってください
- DB は h2 を使ってください
- ORM は MyBatis を使ってください。XML-base でも Annotation-base でもどちらでもよいです
- スキーマ管理、初期データ投入は Spring の schema.sql / data.sql でOKです
    - ⇒ アプリケーションの起動の度にデータがクリアされてしまった構いません
- https://auth0.com/docs/quickstart/webapp/java-spring-boot/01-login が参考になると思います
- 納品はこちらの指定した github のリポジトリにコミットを積む形でお願いいたします

# 仕様

## URL一覧

以下のようなイメージでした。
都合が悪ければ、作りやすいように追加・削除・変更して構いません。
その場合は、一声相談してください。

- トップページ /: 未ログイン閲覧可
- ホームページ /home: 未ログイン閲覧不可
- ログイン /login: 未ログイン閲覧可
- ログアウト /logout: 未ログイン閲覧可
- 会員登録 /register

## トップページ

- ログイン画面へのリンクが表示されている
- 会員登録画面へのリンクが表示されている

## ログインページ

- ログインボタンが表示されている
- 会員登録ページへのリンクが表示されている
- 登録済ユーザーがログインボタンを押すと、Google のログイン画面に飛び、認証が完了すると、/home にリダイレクトされる
- 未登録ユーザーがログインボタンを押すと、ログインページに戻され、「このGoogleアカウントでの登録情報はありません。登録したアカウントをご確認の上、再度ログインをお試しください。またはこちらから会員登録をしてください」と表示される

## ログアウトページ

- /home にログアウトボタンが表示されている
- ログアウトボタンを押すと、セッションが破棄される。/ に遷移する

## 会員登録ページ

- 会員登録ボタンが表示されている
- ログインページへのリンクが表示されている
- 未登録ユーザーが会員登録ボタンを押すと、Google の認証に進み、通過後、初期設定画面に遷移する
- 初期設定画面には、メールアドレスとユーザー名を入力するフォームが表示されている
- メールアドレスとユーザー名を入力し、会員登録すると、DBに永続化され、会員登録が完了し、/home にリダイレクトされる
- Google でのログインに成功したが、初期設定画面で離脱したユーザーはログインできない
- 登録済ユーザーが会員登録ボタンを押すと、会員登録画面に戻され、「すでに会員登録されています。こちらからログインしてください」とエラーメッセージを表示する

## ホームページ

- ユーザー名とメールアドレスが表示されている

# 実装手順

いくつかチェックポイントを設けさせてください。
以下に示すポイントでコミットをし、確認依頼を出してください。

1. OIDC でのログイン（未登録ユーザーがログイン画面にエラーメッセージ付きで戻される処理を除く）ができる。ログアウトができる。
2. 会員登録（ユーザー名とメールアドレスの登録まで）ができる（登録済みユーザーの場合に会員登録画面にエラーメッセージ付きで戻す処理を除く）。会員登録したユーザーがログインできる。
3. 未登録ユーザーがログイン画面にエラーメッセージ付きで戻される処理 + 登録済みユーザーの場合に会員登録画面にエラーメッセージ付きで戻す処理　を含む残りの部分

# 納品方法

下記リポジトリをクローンしてコミットを納品してください。
- https://github.com/ita-jp/spring-auth0-oidc

ブランチを作り、コミットをプッシュ→PRを立ててください。
上記1, 2, 3のブランチ名を step1, step2, step3 としてください。
各ステップ終了後、PR の URLを添付した確認依頼を出してください